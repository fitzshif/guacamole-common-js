{{var Guacamole=Guacamole||{},Guacamole=(Guacamole.ArrayBufferReader=function(e){var o=this;e.onblob=function(e){for(var t=window.atob(e),e=new ArrayBuffer(t.length),n=new Uint8Array(e),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);o.ondata&&o.ondata(e)},e.onend=function(){o.onend&&o.onend()},this.ondata=null,this.onend=null},Guacamole||{}),Guacamole=(Guacamole.ArrayBufferWriter=function(a){var o=this;function i(e){for(var t="",n=0;n<e.byteLength;n++)t+=String.fromCharCode(e[n]);a.sendBlob(window.btoa(t))}a.onack=function(e){o.onack&&o.onack(e)},this.blobLength=Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH,this.sendData=function(e){var t=new Uint8Array(e);if(t.length<=o.blobLength)i(t);else for(var n=0;n<t.length;n+=o.blobLength)i(t.subarray(n,n+o.blobLength))},this.sendEnd=function(){a.sendEnd()},this.onack=null},Guacamole.ArrayBufferWriter.DEFAULT_BLOB_LENGTH=6048,Guacamole||{}),Guacamole=(Guacamole.AudioContextFactory={singleton:null,getAudioContext:function(){var e=window.AudioContext||window.webkitAudioContext;if(e)try{return Guacamole.AudioContextFactory.singleton||(Guacamole.AudioContextFactory.singleton=new e),Guacamole.AudioContextFactory.singleton}catch(e){}return null}},Guacamole||{}),Guacamole=(Guacamole.AudioPlayer=function(){this.sync=function(){}},Guacamole.AudioPlayer.isSupportedType=function(e){return Guacamole.RawAudioPlayer.isSupportedType(e)},Guacamole.AudioPlayer.getSupportedTypes=function(){return Guacamole.RawAudioPlayer.getSupportedTypes()},Guacamole.AudioPlayer.getInstance=function(e,t){return Guacamole.RawAudioPlayer.isSupportedType(t)?new Guacamole.RawAudioPlayer(e,t):null},Guacamole.RawAudioPlayer=function(e,t){var u=Guacamole.RawAudioFormat.parse(t),c=Guacamole.AudioContextFactory.getAudioContext(),l=c.currentTime,t=new Guacamole.ArrayBufferReader(e),h=.02,d=1===u.bytesPerSample?window.Int8Array:window.Int16Array,f=1===u.bytesPerSample?128:32768,n=[],a=function(e){if(e.length<=1)return e[0];var t=0,n=(e.forEach(function(e){t+=e.length}),0),a=new d(t);return e.forEach(function(e){a.set(e,n),n+=e.length}),a},o=function(e){for(var t=Number.MAX_VALUE,n=e.length,a=Math.floor(e.length/u.channels),o=Math.floor(u.rate*h),i=Math.max(u.channels*o,u.channels*(a-o));i<e.length;i+=u.channels){for(var r=0,s=0;s<u.channels;s++)r+=Math.abs(e[i+s]);r<=t&&(n=i+u.channels,t=r)}return n===e.length?[e]:[new d(e.buffer.slice(0,n*u.bytesPerSample)),new d(e.buffer.slice(n*u.bytesPerSample))]};t.ondata=function(e){e=new d(e),n.push(new d(e));var t,e=(e=a(n))?(n=o(e)).shift():null;e&&(t=c.currentTime,l<t&&(l=t),(t=c.createBufferSource()).connect(c.destination),t.start||(t.start=t.noteOn),t.buffer=function(e){for(var t=e.length/u.channels,n=c.currentTime,a=(l<n&&(l=n),c.createBuffer(u.channels,t,u.rate)),o=0;o<u.channels;o++)for(var i=a.getChannelData(o),r=o,s=0;s<t;s++)i[s]=e[r]/f,r+=u.channels;return a}(e),t.start(l),l+=e.length/u.channels/u.rate)},this.sync=function(){var e=c.currentTime;l=Math.min(l,e+.3)}},Guacamole.RawAudioPlayer.prototype=new Guacamole.AudioPlayer,Guacamole.RawAudioPlayer.isSupportedType=function(e){return!!Guacamole.AudioContextFactory.getAudioContext()&&null!==Guacamole.RawAudioFormat.parse(e)},Guacamole.RawAudioPlayer.getSupportedTypes=function(){return Guacamole.AudioContextFactory.getAudioContext()?["audio/L8","audio/L16"]:[]},Guacamole||{}),Guacamole=(Guacamole.AudioRecorder=function(){this.onclose=null,this.onerror=null},Guacamole.AudioRecorder.isSupportedType=function(e){return Guacamole.RawAudioRecorder.isSupportedType(e)},Guacamole.AudioRecorder.getSupportedTypes=function(){return Guacamole.RawAudioRecorder.getSupportedTypes()},Guacamole.AudioRecorder.getInstance=function(e,t){return Guacamole.RawAudioRecorder.isSupportedType(t)?new Guacamole.RawAudioRecorder(e,t):null},Guacamole.RawAudioRecorder=function(e,n){var a=this,d=2048,r=3,u=Guacamole.RawAudioFormat.parse(n),t=Guacamole.AudioContextFactory.getAudioContext(),o=(navigator.mediaDevices||(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia||(navigator.mediaDevices.getUserMedia=(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia).bind(navigator)),new Guacamole.ArrayBufferWriter(e)),f=1===u.bytesPerSample?window.Int8Array:window.Int16Array,m=1===u.bytesPerSample?128:32768,c=0,l=0,i=null,s=null,h=null,p=function(e){if(0===e)return 1;e=Math.PI*e;return Math.sin(e)/e},g=function(e,t){return-t<e&&e<t?p(e)*p(e/t):0},y=function(e,t){for(var n=(e.length-1)*t,t=Math.floor(n)-r+1,a=Math.floor(n)+r,o=0,i=t;i<=a;i++)o+=(e[i]||0)*g(n-i,r);return o},v=function(e){var t=e.length;c+=t;for(var n=Math.round(c*u.rate/e.sampleRate)-l,a=(l+=n,new f(n*u.channels)),o=0;o<u.channels;o++)for(var i=e.getChannelData(o),r=o,s=0;s<n;s++)a[r]=y(i,s/(n-1))*m,r+=u.channels;return a},w=function(e){(h=t.createScriptProcessor(d,u.channels,u.channels)).connect(t.destination),h.onaudioprocess=function(e){o.sendData(v(e.inputBuffer).buffer)},(s=t.createMediaStreamSource(e)).connect(h),"suspended"===t.state&&t.resume(),i=e},G=function(){o.sendEnd(),a.onerror&&a.onerror()};o.onack=function(e){if(e.code!==Guacamole.Status.Code.SUCCESS||i){if(s&&s.disconnect(),h&&h.disconnect(),i)for(var t=i.getTracks(),n=0;n<t.length;n++)t[n].stop();i=s=h=null,o.sendEnd(),o.onack=null,e.code===Guacamole.Status.Code.RESOURCE_CLOSED?a.onclose&&a.onclose():a.onerror&&a.onerror()}else(e=navigator.mediaDevices.getUserMedia({audio:!0},w,G))&&e.then&&e.then(w,G)}},Guacamole.RawAudioRecorder.prototype=new Guacamole.AudioRecorder,Guacamole.RawAudioRecorder.isSupportedType=function(e){return!!Guacamole.AudioContextFactory.getAudioContext()&&null!==Guacamole.RawAudioFormat.parse(e)},Guacamole.RawAudioRecorder.getSupportedTypes=function(){return Guacamole.AudioContextFactory.getAudioContext()?["audio/L8","audio/L16"]:[]},Guacamole||{}),Guacamole=(Guacamole.BlobReader=function(o,n){var i=this,r=0,s=new(window.BlobBuilder?BlobBuilder:window.WebKitBlobBuilder?WebKitBlobBuilder:window.MozBlobBuilder?MozBlobBuilder:function(){var t=[];this.append=function(e){t.push(new Blob([e],{type:n}))},this.getBlob=function(){return new Blob(t,{type:n})}});o.onblob=function(e){for(var t=window.atob(e),e=new ArrayBuffer(t.length),n=new Uint8Array(e),a=0;a<t.length;a++)n[a]=t.charCodeAt(a);s.append(e),r+=e.byteLength,i.onprogress&&i.onprogress(e.byteLength),o.sendAck("OK",0)},o.onend=function(){i.onend&&i.onend()},this.getLength=function(){return r},this.getBlob=function(){return s.getBlob()},this.onprogress=null,this.onend=null},Guacamole||{}),Guacamole=(Guacamole.BlobWriter=function(e){var i=this,r=new Guacamole.ArrayBufferWriter(e);r.onack=function(e){i.onack&&i.onack(e)};this.sendBlob=function(t){function n(){var e;a>=t.size?i.oncomplete&&i.oncomplete(t):(e=function(e,t,n){var e=(e.slice||e.webkitSlice||e.mozSlice).bind(e),a=n-t;if(a!==n){var o=e(t,a);if(o.size===a)return o}return e(t,n)}(t,a,a+r.blobLength),a+=r.blobLength,o.readAsArrayBuffer(e))}var a=0,o=new FileReader;o.onload=function(){r.sendData(o.result),r.onack=function(e){i.onack&&i.onack(e),e.isError()||(i.onprogress&&i.onprogress(t,a-r.blobLength),n())}},o.onerror=function(){i.onerror&&i.onerror(t,a,o.error)},n()},this.sendEnd=function(){r.sendEnd()},this.onack=null,this.onerror=null,this.onprogress=null,this.oncomplete=null},Guacamole||{}),Guacamole=(Guacamole.Client=function(o){var r=this,a=2,f=3,u=0,m=0,p=null,g={0:"butt",1:"round",2:"square"},y={0:"bevel",1:"miter",2:"round"},c=new Guacamole.Display,l={},v={},w={},G=[],s=[],S=[],T=new Guacamole.IntegerPool,i=[];function n(e){e!=u&&(u=e,r.onstatechange&&r.onstatechange(u))}function h(){return u==f||u==a}this.exportState=function(i){var e,r={currentState:u,currentTimestamp:m,layers:{}},s={};for(e in l)s[e]=l[e];c.flush(function(){for(var e in s){var t=parseInt(e),n=s[e],a=n.toCanvas(),o={width:n.width,height:n.height};n.width&&n.height&&(o.url=a.toDataURL("image/png")),0<t&&(o.x=n.x,o.y=n.y,o.z=n.z,o.alpha=n.alpha,o.matrix=n.matrix,o.parent=E(n.parent)),r.layers[e]=o}i(r)})},this.importState=function(e,t){for(var n in u=e.currentState,m=e.currentTimestamp,l)0<(o=parseInt(n))&&c.dispose(l[n]);for(n in l={},e.layers){var a,o=parseInt(n),i=e.layers[n],r=d(o);c.resize(r,i.width,i.height),i.url&&(c.setChannelMask(r,Guacamole.Layer.SRC),c.draw(r,0,0,i.url)),0<o&&0<=i.parent&&(a=d(i.parent),c.move(r,a,i.x,i.y,i.z),c.shade(r,i.alpha),a=i.matrix,c.distort(r,a[0],a[1],a[2],a[3],a[4],a[5]))}c.flush(t)},this.getDisplay=function(){return c},this.sendSize=function(e,t){h()&&o.sendMessage("size",e,t)},this.sendKeyEvent=function(e,t){h()&&o.sendMessage("key",t,e)},this.sendMouseState=function(e,t){var n,a;h()&&(n=e.x,a=e.y,t&&(n/=c.getScale(),a/=c.getScale()),c.moveCursor(Math.floor(n),Math.floor(a)),t=0,e.left&&(t|=1),e.middle&&(t|=2),e.right&&(t|=4),e.up&&(t|=8),e.down&&(t|=16),o.sendMessage("mouse",Math.floor(n),Math.floor(a),t))},this.sendTouchState=function(e,t){var n,a;h()&&(n=e.x,a=e.y,t&&(n/=c.getScale(),a/=c.getScale()),o.sendMessage("touch",e.id,Math.floor(n),Math.floor(a),Math.floor(e.radiusX),Math.floor(e.radiusY),e.angle,e.force))},this.createOutputStream=function(){var e=T.next();return i[e]=new Guacamole.OutputStream(r,e)},this.createAudioStream=function(e){var t=r.createOutputStream();return o.sendMessage("audio",t.index,e),t},this.createFileStream=function(e,t){var n=r.createOutputStream();return o.sendMessage("file",n.index,e,t),n},this.createPipeStream=function(e,t){var n=r.createOutputStream();return o.sendMessage("pipe",n.index,e,t),n},this.createClipboardStream=function(e){var t=r.createOutputStream();return o.sendMessage("clipboard",t.index,e),t},this.createArgumentValueStream=function(e,t){var n=r.createOutputStream();return o.sendMessage("argv",n.index,e,t),n},this.createObjectOutputStream=function(e,t,n){var a=r.createOutputStream();return o.sendMessage("put",e,a.index,t,n),a},this.requestObjectInputStream=function(e,t){h()&&o.sendMessage("get",e,t)},this.sendAck=function(e,t,n){h()&&o.sendMessage("ack",e,t,n)},this.sendBlob=function(e,t){h()&&o.sendMessage("blob",e,t)},this.endStream=function(e){h()&&(o.sendMessage("end",e),i[e]&&(T.free(e),delete i[e]))},this.onstatechange=null,this.onname=null,this.onerror=null,this.onaudio=null,this.onvideo=null,this.onmultitouch=null,this.onargv=null,this.onclipboard=null,this.onfile=null,this.onfilesystem=null,this.onpipe=null,this.onrequired=null,this.onsync=null;var d=function(e){var t=l[e];return t||(t=0===e?c.getDefaultLayer():0<e?c.createLayer():c.createBuffer(),l[e]=t),t},E=function(e){if(!e)return null;for(var t in l)if(e===l[t])return parseInt(t);return null};var b={"miter-limit":function(e,t){c.setMiterLimit(e,parseFloat(t))},"multi-touch":function(e,t){r.onmultitouch&&e instanceof Guacamole.Display.VisibleLayer&&r.onmultitouch(e,parseInt(t))}},I={ack:function(e){var t=parseInt(e[0]),n=e[1],e=parseInt(e[2]),a=i[t];a&&(a.onack&&a.onack(new Guacamole.Status(e,n)),256<=e&&i[t]===a&&(T.free(t),delete i[t]))},arc:function(e){var t=d(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),o=parseInt(e[3]),i=parseFloat(e[4]),r=parseFloat(e[5]),e=parseInt(e[6]);c.arc(t,n,a,o,i,r,0!=e)},argv:function(e){var t,n=parseInt(e[0]),a=e[1],e=e[2];r.onargv?(t=s[n]=new Guacamole.InputStream(r,n),r.onargv(t,a,e)):r.sendAck(n,"Receiving argument values unsupported",256)},audio:function(e){var t=parseInt(e[0]),e=e[1],n=s[t]=new Guacamole.InputStream(r,t),a=null;(a=(a=r.onaudio?r.onaudio(n,e):a)||Guacamole.AudioPlayer.getInstance(n,e))?(v[t]=a,r.sendAck(t,"OK",0)):r.sendAck(t,"BAD TYPE",783)},blob:function(e){var t=parseInt(e[0]),e=e[1],t=s[t];t&&t.onblob&&t.onblob(e)},body:function(e){var t,n=parseInt(e[0]),n=S[n],a=parseInt(e[1]),o=e[2],e=e[3];n&&n.onbody?(t=s[a]=new Guacamole.InputStream(r,a),n.onbody(t,o,e)):r.sendAck(a,"Receipt of body unsupported",256)},cfill:function(e){var t=parseInt(e[0]),n=d(parseInt(e[1])),a=parseInt(e[2]),o=parseInt(e[3]),i=parseInt(e[4]),e=parseInt(e[5]);c.setChannelMask(n,t),c.fillColor(n,a,o,i,e)},clip:function(e){e=d(parseInt(e[0]));c.clip(e)},clipboard:function(e){var t,n=parseInt(e[0]),e=e[1];r.onclipboard?(t=s[n]=new Guacamole.InputStream(r,n),r.onclipboard(t,e)):r.sendAck(n,"Clipboard unsupported",256)},close:function(e){e=d(parseInt(e[0]));c.close(e)},copy:function(e){var t=d(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),o=parseInt(e[3]),i=parseInt(e[4]),r=parseInt(e[5]),s=d(parseInt(e[6])),u=parseInt(e[7]),e=parseInt(e[8]);c.setChannelMask(s,r),c.copy(t,n,a,o,i,s,u,e)},cstroke:function(e){var t=parseInt(e[0]),n=d(parseInt(e[1])),a=g[parseInt(e[2])],o=y[parseInt(e[3])],i=parseInt(e[4]),r=parseInt(e[5]),s=parseInt(e[6]),u=parseInt(e[7]),e=parseInt(e[8]);c.setChannelMask(n,t),c.strokeColor(n,a,o,i,r,s,u,e)},cursor:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=d(parseInt(e[2])),o=parseInt(e[3]),i=parseInt(e[4]),r=parseInt(e[5]),e=parseInt(e[6]);c.setCursor(t,n,a,o,i,r,e)},curve:function(e){var t=d(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),o=parseInt(e[3]),i=parseInt(e[4]),r=parseInt(e[5]),e=parseInt(e[6]);c.curveTo(t,n,a,o,i,r,e)},disconnect:function(e){r.disconnect()},dispose:function(e){var t,e=parseInt(e[0]);0<e?(t=d(e),c.dispose(t),delete l[e]):e<0&&delete l[e]},distort:function(e){var t=parseInt(e[0]),n=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]),i=parseFloat(e[4]),r=parseFloat(e[5]),e=parseFloat(e[6]);0<=t&&(t=d(t),c.distort(t,n,a,o,i,r,e))},error:function(e){var t=e[0],e=parseInt(e[1]);r.onerror&&r.onerror(new Guacamole.Status(e,t)),r.disconnect()},end:function(e){var e=parseInt(e[0]),t=s[e];t&&(t.onend&&t.onend(),delete s[e])},file:function(e){var t,n=parseInt(e[0]),a=e[1],e=e[2];r.onfile?(t=s[n]=new Guacamole.InputStream(r,n),r.onfile(t,a,e)):r.sendAck(n,"File transfer unsupported",256)},filesystem:function(e){var t=parseInt(e[0]),e=e[1];r.onfilesystem&&(t=S[t]=new Guacamole.Object(r,t),r.onfilesystem(t,e))},identity:function(e){e=d(parseInt(e[0]));c.setTransform(e,1,0,0,1,0,0)},img:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=d(parseInt(e[2])),o=e[3],i=parseInt(e[4]),e=parseInt(e[5]),t=s[t]=new Guacamole.InputStream(r,t);c.setChannelMask(a,n),c.drawStream(a,i,e,t,o)},jpeg:function(e){var t=parseInt(e[0]),n=d(parseInt(e[1])),a=parseInt(e[2]),o=parseInt(e[3]),e=e[4];c.setChannelMask(n,t),c.draw(n,a,o,"data:image/jpeg;base64,"+e)},lfill:function(e){var t=parseInt(e[0]),n=d(parseInt(e[1])),e=d(parseInt(e[2]));c.setChannelMask(n,t),c.fillLayer(n,e)},line:function(e){var t=d(parseInt(e[0])),n=parseInt(e[1]),e=parseInt(e[2]);c.lineTo(t,n,e)},lstroke:function(e){var t=parseInt(e[0]),n=d(parseInt(e[1])),e=d(parseInt(e[2]));c.setChannelMask(n,t),c.strokeLayer(n,e)},mouse:function(e){var t=parseInt(e[0]),e=parseInt(e[1]);c.showCursor(!0),c.moveCursor(t,e)},move:function(e){var t=parseInt(e[0]),n=parseInt(e[1]),a=parseInt(e[2]),o=parseInt(e[3]),e=parseInt(e[4]);0<t&&0<=n&&(t=d(t),n=d(n),c.move(t,n,a,o,e))},name:function(e){r.onname&&r.onname(e[0])},nest:function(e){var t,n;t=parseInt(e[0]),null==(n=G[t])&&((n=G[t]=new Guacamole.Parser).oninstruction=o.oninstruction),n.receive(e[1])},pipe:function(e){var t,n=parseInt(e[0]),a=e[1],e=e[2];r.onpipe?(t=s[n]=new Guacamole.InputStream(r,n),r.onpipe(t,a,e)):r.sendAck(n,"Named pipes unsupported",256)},png:function(e){var t=parseInt(e[0]),n=d(parseInt(e[1])),a=parseInt(e[2]),o=parseInt(e[3]),e=e[4];c.setChannelMask(n,t),c.draw(n,a,o,"data:image/png;base64,"+e)},pop:function(e){e=d(parseInt(e[0]));c.pop(e)},push:function(e){e=d(parseInt(e[0]));c.push(e)},rect:function(e){var t=d(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),o=parseInt(e[3]),e=parseInt(e[4]);c.rect(t,n,a,o,e)},required:function(e){r.onrequired&&r.onrequired(e)},reset:function(e){e=d(parseInt(e[0]));c.reset(e)},set:function(e){var t=d(parseInt(e[0])),n=e[1],e=e[2],n=b[n];n&&n(t,e)},shade:function(e){var t=parseInt(e[0]),e=parseInt(e[1]);0<=t&&(t=d(t),c.shade(t,e))},size:function(e){var t=parseInt(e[0]),t=d(t),n=parseInt(e[1]),e=parseInt(e[2]);c.resize(t,n,e)},start:function(e){var t=d(parseInt(e[0])),n=parseInt(e[1]),e=parseInt(e[2]);c.moveTo(t,n,e)},sync:function(e){var t=parseInt(e[0]);c.flush(function(){for(var e in v){e=v[e];e&&e.sync()}t!==m&&(o.sendMessage("sync",t),m=t)}),u===a&&n(f),r.onsync&&r.onsync(t)},transfer:function(e){var t=d(parseInt(e[0])),n=parseInt(e[1]),a=parseInt(e[2]),o=parseInt(e[3]),i=parseInt(e[4]),r=parseInt(e[5]),s=d(parseInt(e[6])),u=parseInt(e[7]),e=parseInt(e[8]);3===r?c.put(t,n,a,o,i,s,u,e):5!==r&&c.transfer(t,n,a,o,i,s,u,e,Guacamole.Client.DefaultTransferFunction[r])},transform:function(e){var t=d(parseInt(e[0])),n=parseFloat(e[1]),a=parseFloat(e[2]),o=parseFloat(e[3]),i=parseFloat(e[4]),r=parseFloat(e[5]),e=parseFloat(e[6]);c.transform(t,n,a,o,i,r,e)},undefine:function(e){e=parseInt(e[0]),e=S[e];e&&e.onundefine&&e.onundefine()},video:function(e){var t=parseInt(e[0]),n=d(parseInt(e[1])),e=e[2],a=s[t]=new Guacamole.InputStream(r,t),o=null;(o=(o=r.onvideo?r.onvideo(a,n,e):o)||Guacamole.VideoPlayer.getInstance(a,n,e))?(w[t]=o,r.sendAck(t,"OK",0)):r.sendAck(t,"BAD TYPE",783)}};o.oninstruction=function(e,t){e=I[e];e&&e(t)},this.disconnect=function(){5!=u&&4!=u&&(n(4),p&&window.clearInterval(p),o.sendMessage("disconnect"),o.disconnect(),n(5))},this.connect=function(e,t){n(1);try{o.connect(e,t)}catch(e){throw n(0),e}p=window.setInterval(function(){o.sendMessage("nop")},5e3),n(a)}},Guacamole.Client.DefaultTransferFunction={0:function(e,t){t.red=t.green=t.blue=0},15:function(e,t){t.red=t.green=t.blue=255},3:function(e,t){t.red=e.red,t.green=e.green,t.blue=e.blue,t.alpha=e.alpha},5:function(e,t){},12:function(e,t){t.red=255&~e.red,t.green=255&~e.green,t.blue=255&~e.blue,t.alpha=e.alpha},10:function(e,t){t.red=255&~t.red,t.green=255&~t.green,t.blue=255&~t.blue},1:function(e,t){t.red=e.red&t.red,t.green=e.green&t.green,t.blue=e.blue&t.blue},14:function(e,t){t.red=255&~(e.red&t.red),t.green=255&~(e.green&t.green),t.blue=255&~(e.blue&t.blue)},7:function(e,t){t.red=e.red|t.red,t.green=e.green|t.green,t.blue=e.blue|t.blue},8:function(e,t){t.red=255&~(e.red|t.red),t.green=255&~(e.green|t.green),t.blue=255&~(e.blue|t.blue)},6:function(e,t){t.red=e.red^t.red,t.green=e.green^t.green,t.blue=e.blue^t.blue},9:function(e,t){t.red=255&~(e.red^t.red),t.green=255&~(e.green^t.green),t.blue=255&~(e.blue^t.blue)},4:function(e,t){t.red=~e.red&t.red&255,t.green=~e.green&t.green&255,t.blue=~e.blue&t.blue&255},13:function(e,t){t.red=255&(~e.red|t.red),t.green=255&(~e.green|t.green),t.blue=255&(~e.blue|t.blue)},2:function(e,t){t.red=e.red&~t.red&255,t.green=e.green&~t.green&255,t.blue=e.blue&~t.blue&255},11:function(e,t){t.red=255&(e.red|~t.red),t.green=255&(e.green|~t.green),t.blue=255&(e.blue|~t.blue)}},Guacamole||{}),Guacamole=(Guacamole.DataURIReader=function(e,t){var n=this,a="data:"+t+";base64,";e.onblob=function(e){a+=e},e.onend=function(){n.onend&&n.onend()},this.getURI=function(){return a},this.onend=null},Guacamole||{});Guacamole.Display=function(){var s=this,a=0,o=0,i=1,r=document.createElement("div"),c=(r.style.position="relative",r.style.width=a+"px",r.style.height=o+"px",r.style.transformOrigin=r.style.webkitTransformOrigin=r.style.MozTransformOrigin=r.style.OTransformOrigin=r.style.msTransformOrigin="0 0",new Guacamole.Display.VisibleLayer(a,o)),u=new Guacamole.Display.VisibleLayer(0,0),l=(u.setChannelMask(Guacamole.Layer.SRC),r.appendChild(c.getElement()),r.appendChild(u.getElement()),document.createElement("div")),d=(l.style.position="relative",l.style.width=a*i+"px",l.style.height=o*i+"px",l.appendChild(r),this.cursorHotspotX=0,this.cursorHotspotY=0,this.cursorX=0,this.cursorY=0,this.onresize=null,this.oncursor=null,[]),n=[];function f(){for(var e=0;e<n.length;){var t=n[e];if(!t.isReady())break;t.flush(),e++}n.splice(0,e)}function t(t,n){this.isReady=function(){for(var e=0;e<n.length;e++)if(n[e].blocked)return!1;return!0},this.flush=function(){for(var e=0;e<n.length;e++)n[e].execute();t&&t()}}function m(e,t){var n=this;this.blocked=t,this.unblock=function(){n.blocked&&(n.blocked=!1,f())},this.execute=function(){e&&e()}}function h(e,t){e=new m(e,t);return d.push(e),e}this.getElement=function(){return l},this.getWidth=function(){return a},this.getHeight=function(){return o},this.getDefaultLayer=function(){return c},this.getCursorLayer=function(){return u},this.createLayer=function(){var e=new Guacamole.Display.VisibleLayer(a,o);return e.move(c,0,0,0),e},this.createBuffer=function(){var e=new Guacamole.Layer(0,0);return e.autosize=1,e},this.flush=function(e){n.push(new t(e,d)),d=[],f()},this.setCursor=function(e,t,n,a,o,i,r){h(function(){s.cursorHotspotX=e,s.cursorHotspotY=t,u.resize(i,r),u.copy(n,a,o,i,r,0,0),s.moveCursor(s.cursorX,s.cursorY),s.oncursor&&s.oncursor(u.toCanvas(),e,t)})},this.showCursor=function(e){var t=u.getElement(),n=t.parentNode;!1===e?n&&n.removeChild(t):n!==r&&r.appendChild(t)},this.moveCursor=function(e,t){u.translate(e-s.cursorHotspotX,t-s.cursorHotspotY),s.cursorX=e,s.cursorY=t},this.resize=function(e,t,n){h(function(){e.resize(t,n),e===c&&(a=t,o=n,r.style.width=a+"px",r.style.height=o+"px",l.style.width=a*i+"px",l.style.height=o*i+"px",s.onresize&&s.onresize(t,n))})},this.drawImage=function(e,t,n,a){h(function(){e.drawImage(t,n,a)})},this.drawBlob=function(e,t,n,a){var o,i,r,s;window.createImageBitmap?(i=h(function(){e.drawImage(t,n,o)},!0),window.createImageBitmap(a).then(function(e){o=e,i.unblock()})):(r=URL.createObjectURL(a),i=h(function(){s.width&&s.height&&e.drawImage(t,n,s),URL.revokeObjectURL(r)},!0),(s=new Image).onload=i.unblock,s.onerror=i.unblock,s.src=r)},this.drawStream=function(e,t,n,a,o){var i;window.createImageBitmap?(i=new Guacamole.BlobReader(a,o)).onend=function(){s.drawBlob(e,t,n,i.getBlob())}:(i=new Guacamole.DataURIReader(a,o)).onend=function(){s.draw(e,t,n,i.getURI())}},this.draw=function(e,t,n,a){var o=h(function(){i.width&&i.height&&e.drawImage(t,n,i)},!0),i=new Image;i.onload=o.unblock,i.onerror=o.unblock,i.src=a},this.play=function(t,e,n,a){var o=document.createElement("video");o.type=e,o.src=a,o.addEventListener("play",function(){!function e(){t.drawImage(0,0,o),o.ended||window.setTimeout(e,20)}()},!1),h(o.play)},this.transfer=function(e,t,n,a,o,i,r,s,u){h(function(){i.transfer(e,t,n,a,o,r,s,u)})},this.put=function(e,t,n,a,o,i,r,s){h(function(){i.put(e,t,n,a,o,r,s)})},this.copy=function(e,t,n,a,o,i,r,s){h(function(){i.copy(e,t,n,a,o,r,s)})},this.moveTo=function(e,t,n){h(function(){e.moveTo(t,n)})},this.lineTo=function(e,t,n){h(function(){e.lineTo(t,n)})},this.arc=function(e,t,n,a,o,i,r){h(function(){e.arc(t,n,a,o,i,r)})},this.curveTo=function(e,t,n,a,o,i,r){h(function(){e.curveTo(t,n,a,o,i,r)})},this.close=function(e){h(function(){e.close()})},this.rect=function(e,t,n,a,o){h(function(){e.rect(t,n,a,o)})},this.clip=function(e){h(function(){e.clip()})},this.strokeColor=function(e,t,n,a,o,i,r,s){h(function(){e.strokeColor(t,n,a,o,i,r,s)})},this.fillColor=function(e,t,n,a,o){h(function(){e.fillColor(t,n,a,o)})},this.strokeLayer=function(e,t,n,a,o){h(function(){e.strokeLayer(t,n,a,o)})},this.fillLayer=function(e,t){h(function(){e.fillLayer(t)})},this.push=function(e){h(function(){e.push()})},this.pop=function(e){h(function(){e.pop()})},this.reset=function(e){h(function(){e.reset()})},this.setTransform=function(e,t,n,a,o,i,r){h(function(){e.setTransform(t,n,a,o,i,r)})},this.transform=function(e,t,n,a,o,i,r){h(function(){e.transform(t,n,a,o,i,r)})},this.setChannelMask=function(e,t){h(function(){e.setChannelMask(t)})},this.setMiterLimit=function(e,t){h(function(){e.setMiterLimit(t)})},this.dispose=function(e){h(function(){e.dispose()})},this.distort=function(e,t,n,a,o,i,r){h(function(){e.distort(t,n,a,o,i,r)})},this.move=function(e,t,n,a,o){h(function(){e.move(t,n,a,o)})},this.shade=function(e,t){h(function(){e.shade(t)})},this.scale=function(e){r.style.transform=r.style.WebkitTransform=r.style.MozTransform=r.style.OTransform=r.style.msTransform="scale("+e+","+e+")",i=e,l.style.width=a*i+"px",l.style.height=o*i+"px"},this.getScale=function(){return i},this.flatten=function(){var e=document.createElement("canvas"),u=(e.width=c.width,e.height=c.height,e.getContext("2d"));return function e(t,n,a){if(0<t.width&&0<t.height){for(var o=u.globalAlpha,i=(u.globalAlpha*=t.alpha/255,u.drawImage(t.getCanvas(),n,a),function(e){var t,n=[];for(t in e.children)n.push(e.children[t]);return n.sort(function(e,t){var n=e.z-t.z;return 0!=n?n:(n=e.getElement(),(e=t.getElement().compareDocumentPosition(n))&Node.DOCUMENT_POSITION_PRECEDING?-1:e&Node.DOCUMENT_POSITION_FOLLOWING?1:0)}),n}(t)),r=0;r<i.length;r++){var s=i[r];e(s,n+s.x,a+s.y)}u.globalAlpha=o}}(c,0,0),e}},Guacamole.Display.VisibleLayer=function(e,t){Guacamole.Layer.apply(this,[e,t]);var r=this,n=(this.__unique_id=Guacamole.Display.VisibleLayer.__next_id++,this.alpha=255,this.x=0,this.y=0,this.z=0,this.matrix=[1,0,0,1,0,0],this.parent=null,this.children={},r.getCanvas()),s=(n.style.position="absolute",n.style.left="0px",n.style.top="0px",document.createElement("div")),a=(s.appendChild(n),s.style.width=e+"px",s.style.height=t+"px",s.style.position="absolute",s.style.left="0px",s.style.top="0px",s.style.overflow="hidden",this.resize),u=(this.resize=function(e,t){s.style.width=e+"px",s.style.height=t+"px",a(e,t)},this.getElement=function(){return s},"translate(0px, 0px)"),c="matrix(1, 0, 0, 1, 0, 0)";this.translate=function(e,t){r.x=e,r.y=t,u="translate("+e+"px,"+t+"px)",s.style.transform=s.style.WebkitTransform=s.style.MozTransform=s.style.OTransform=s.style.msTransform=u+" "+c},this.move=function(e,t,n,a){r.parent!==e&&(r.parent&&delete r.parent.children[r.__unique_id],(r.parent=e).children[r.__unique_id]=r,e.getElement().appendChild(s)),r.translate(t,n),r.z=a,s.style.zIndex=a},this.shade=function(e){r.alpha=e,s.style.opacity=e/255},this.dispose=function(){r.parent&&(delete r.parent.children[r.__unique_id],r.parent=null),s.parentNode&&s.parentNode.removeChild(s)},this.distort=function(e,t,n,a,o,i){r.matrix=[e,t,n,a,o,i],c="matrix("+e+","+t+","+n+","+a+","+o+","+i+")",s.style.transform=s.style.WebkitTransform=s.style.MozTransform=s.style.OTransform=s.style.msTransform=u+" "+c}},Guacamole.Display.VisibleLayer.__next_id=0;var Guacamole,Guacamole,Guacamole,Guacamole,Guacamole,Guacamole,Guacamole,Guacamole,Guacamole,Guacamole,Guacamole,Guacamole}(Guacamole=Guacamole||{}).Event=function(e){this.type=e,this.timestamp=(new Date).getTime(),this.getAge=function(){return(new Date).getTime()-this.timestamp},this.invokeLegacyHandler=function(e){}},Guacamole.Event.DOMEvent=function(e,t){Guacamole.Event.call(this,e),t=t||[],Array.isArray(t)||(t=[t]),this.preventDefault=function(){t.forEach(function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1})},this.stopPropagation=function(){t.forEach(function(e){e.stopPropagation()})}},Guacamole.Event.DOMEvent.cancelEvent=function(e){e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1},Guacamole.Event.Target=function(){var o={};this.on=function(e,t){var n=o[e];n||(o[e]=n=[]),n.push(t)},this.onEach=function(e,t){e.forEach(function(e){this.on(e,t)},this)},this.dispatch=function(e){e.invokeLegacyHandler(this);var t=o[e.type];if(t)for(var n=0;n<t.length;n++)t[n](e,this)},this.off=function(e,t){var n=o[e];if(!n)return!1;for(var a=0;a<n.length;a++)if(n[a]===t)return n.splice(a,1),!0;return!1},this.offEach=function(e,t){var n=!1;return e.forEach(function(e){n|=this.off(e,t)},this),n}},(Guacamole=Guacamole||{}).InputSink=function(){var n=this,t=document.createElement("textarea");t.style.position="fixed",t.style.outline="none",t.style.border="none",t.style.margin="0",t.style.padding="0",t.style.height="0",t.style.width="0",t.style.left="0",t.style.bottom="0",t.style.resize="none",t.style.background="transparent",t.style.color="transparent",t.addEventListener("keypress",function(e){t.value=""},!1),t.addEventListener("compositionend",function(e){e.data&&(t.value="")},!1),t.addEventListener("input",function(e){e.data&&!e.isComposing&&(t.value="")},!1),t.addEventListener("focus",function(){window.setTimeout(function(){t.click(),t.select()},0)},!0),this.focus=function(){window.setTimeout(function(){t.focus()},0)},this.getElement=function(){return t},document.addEventListener("keydown",function(e){var t=document.activeElement;if(t&&t!==document.body){t=t.getBoundingClientRect();if(0<t.left+t.width&&0<t.top+t.height)return}n.focus()},!0)},(Guacamole=Guacamole||{}).InputStream=function(n,e){var a=this;this.index=e,this.onblob=null,this.onend=null,this.sendAck=function(e,t){n.sendAck(a.index,e,t)}},(Guacamole=Guacamole||{}).IntegerPool=function(){var e=this,t=[];this.next_int=0,this.next=function(){return 0<t.length?t.shift():e.next_int++},this.free=function(e){t.push(e)}},(Guacamole=Guacamole||{}).JSONReader=function(e){var t=this,e=new Guacamole.StringReader(e),n="";this.getLength=function(){return n.length},this.getJSON=function(){return JSON.parse(n)},e.ontext=function(e){n+=e,t.onprogress&&t.onprogress(e.length)},e.onend=function(){t.onend&&t.onend()},this.onprogress=null,this.onend=null},(Guacamole=Guacamole||{}).Keyboard=function(e){var i=this,a="_GUAC_KEYBOARD_HANDLED_BY_"+Guacamole.Keyboard._nextID++,r=(this.onkeydown=null,this.onkeyup=null,{keyupUnreliable:!1,altIsTypableOnly:!1,capsLockKeyupUnreliable:!1}),t=(navigator&&navigator.platform&&(navigator.platform.match(/ipad|iphone|ipod/i)?r.keyupUnreliable=!0:navigator.platform.match(/^mac/i)&&(r.altIsTypableOnly=!0,r.capsLockKeyupUnreliable=!0)),function(e){var t=this;this.keyCode=e?e.which||e.keyCode:0,this.keyIdentifier=e&&e.keyIdentifier,this.key=e&&e.key,this.location=e?M(e):0,this.modifiers=e?Guacamole.Keyboard.ModifierState.fromKeyboardEvent(e):new Guacamole.Keyboard.ModifierState,this.timestamp=(new Date).getTime(),this.defaultPrevented=!1,this.keysym=null,this.reliable=!1,this.getAge=function(){return(new Date).getTime()-t.timestamp}}),s=function(e){t.call(this,e),this.keysym=S(this.key,this.location)||E(this.keyCode,this.location),this.keyupReliable=!r.keyupUnreliable,this.keysym&&!G(this.keysym)&&(this.reliable=!0),!this.keysym&&b(this.keyCode,this.keyIdentifier)&&(this.keysym=S(this.keyIdentifier,this.location,this.modifiers.shift)),(this.modifiers.meta&&65511!==this.keysym&&65512!==this.keysym||65509===this.keysym&&r.capsLockKeyupUnreliable)&&(this.keyupReliable=!1);e=!this.modifiers.ctrl&&!r.altIsTypableOnly;(!this.modifiers.alt&&this.modifiers.ctrl||e&&this.modifiers.alt||this.modifiers.meta||this.modifiers.hyper)&&(this.reliable=!0),h[this.keyCode]=this.keysym},u=(s.prototype=new t,function(e){t.call(this,e),this.keysym=T(this.keyCode),this.reliable=!0}),c=(u.prototype=new t,function(e){t.call(this,e),this.keysym=E(this.keyCode,this.location)||S(this.key,this.location),i.pressed[this.keysym]||(this.keysym=h[this.keyCode]||this.keysym),this.reliable=!0}),l=(c.prototype=new t,[]),d={8:[65288],9:[65289],12:[65291,65291,65291,65461],13:[65293],16:[65505,65505,65506],17:[65507,65507,65508],18:[65513,65513,65027],19:[65299],20:[65509],27:[65307],32:[32],33:[65365,65365,65365,65465],34:[65366,65366,65366,65459],35:[65367,65367,65367,65457],36:[65360,65360,65360,65463],37:[65361,65361,65361,65460],38:[65362,65362,65362,65464],39:[65363,65363,65363,65462],40:[65364,65364,65364,65458],45:[65379,65379,65379,65456],46:[65535,65535,65535,65454],91:[65511],92:[65512],93:[65383],96:[65456],97:[65457],98:[65458],99:[65459],100:[65460],101:[65461],102:[65462],103:[65463],104:[65464],105:[65465],106:[65450],107:[65451],109:[65453],110:[65454],111:[65455],112:[65470],113:[65471],114:[65472],115:[65473],116:[65474],117:[65475],118:[65476],119:[65477],120:[65478],121:[65479],122:[65480],123:[65481],144:[65407],145:[65300],225:[65027]},f={Again:[65382],AllCandidates:[65341],Alphanumeric:[65328],Alt:[65513,65513,65027],Attn:[64782],AltGraph:[65027],ArrowDown:[65364],ArrowLeft:[65361],ArrowRight:[65363],ArrowUp:[65362],Backspace:[65288],CapsLock:[65509],Cancel:[65385],Clear:[65291],Convert:[65313],Copy:[64789],Crsel:[64796],CrSel:[64796],CodeInput:[65335],Compose:[65312],Control:[65507,65507,65508],ContextMenu:[65383],Delete:[65535],Down:[65364],End:[65367],Enter:[65293],EraseEof:[64774],Escape:[65307],Execute:[65378],Exsel:[64797],ExSel:[64797],F1:[65470],F2:[65471],F3:[65472],F4:[65473],F5:[65474],F6:[65475],F7:[65476],F8:[65477],F9:[65478],F10:[65479],F11:[65480],F12:[65481],F13:[65482],F14:[65483],F15:[65484],F16:[65485],F17:[65486],F18:[65487],F19:[65488],F20:[65489],F21:[65490],F22:[65491],F23:[65492],F24:[65493],Find:[65384],GroupFirst:[65036],GroupLast:[65038],GroupNext:[65032],GroupPrevious:[65034],FullWidth:null,HalfWidth:null,HangulMode:[65329],Hankaku:[65321],HanjaMode:[65332],Help:[65386],Hiragana:[65317],HiraganaKatakana:[65319],Home:[65360],Hyper:[65517,65517,65518],Insert:[65379],JapaneseHiragana:[65317],JapaneseKatakana:[65318],JapaneseRomaji:[65316],JunjaMode:[65336],KanaMode:[65325],KanjiMode:[65313],Katakana:[65318],Left:[65361],Meta:[65511,65511,65512],ModeChange:[65406],NumLock:[65407],PageDown:[65366],PageUp:[65365],Pause:[65299],Play:[64790],PreviousCandidate:[65342],PrintScreen:[65377],Redo:[65382],Right:[65363],RomanCharacters:null,Scroll:[65300],Select:[65376],Separator:[65452],Shift:[65505,65505,65506],SingleCandidate:[65340],Super:[65515,65515,65516],Tab:[65289],UIKeyInputDownArrow:[65364],UIKeyInputEscape:[65307],UIKeyInputLeftArrow:[65361],UIKeyInputRightArrow:[65363],UIKeyInputUpArrow:[65362],Up:[65362],Undo:[65381],Win:[65511,65511,65512],Zenkaku:[65320],ZenkakuHankaku:[65322]},m={65027:!0,65505:!0,65506:!0,65507:!0,65508:!0,65509:!0,65511:!0,65512:!0,65513:!0,65514:!0,65515:!0,65516:!0},p=(this.modifiers=new Guacamole.Keyboard.ModifierState,this.pressed={},{}),g={},h={},y=null,v=null,w=function(e,t){return e?e[t]||e[0]:null},G=function(e){return 0<=e&&e<=255||16777216==(4294901760&e)};function S(e,t,n){if(!e)return null;var a=e.indexOf("U+");if(0<=a)var a=e.substring(a+2),o=String.fromCharCode(parseInt(a,16));else{if(1!==e.length||3===t)return w(f[e],t);o=e}return!0===n?o=o.toUpperCase():!1===n&&(o=o.toLowerCase()),T(o.charCodeAt(0))}function T(e){return(t=e)<=31||127<=t&&t<=159?65280|e:0<=e&&e<=255?e:256<=e&&e<=1114111?16777216|e:null;var t}function E(e,t){return w(d[e],t)}var b=function(e,t){if(!t)return!1;var n=t.indexOf("U+");return-1===n||(e!==parseInt(t.substring(n+2),16)||(65<=e&&e<=90||48<=e&&e<=57))},n=(this.press=function(e){if(null!==e){var t;if(!i.pressed[e])if(i.pressed[e]=!0,i.onkeydown)return t=i.onkeydown(e),g[e]=t,window.clearTimeout(y),window.clearInterval(v),m[e]||(y=window.setTimeout(function(){v=window.setInterval(function(){i.onkeyup(e),i.onkeydown(e)},50)},500)),t;return g[e]||!1}},this.release=function(e){i.pressed[e]&&(delete i.pressed[e],delete p[e],window.clearTimeout(y),window.clearInterval(v),null!==e&&i.onkeyup&&i.onkeyup(e))},this.type=function(e){for(var t=0;t<e.length;t++){var n=T(e.codePointAt?e.codePointAt(t):e.charCodeAt(t));i.press(n),i.release(n)}},this.reset=function(){for(var e in i.pressed)i.release(parseInt(e));l=[]},function(e,t,n){var a,o=n.modifiers[e],e=i.modifiers[e];if(-1===t.indexOf(n.keysym))if(e&&!1===o)for(a=0;a<t.length;a++)i.release(t[a]);else if(!e&&o){for(a=0;a<t.length;a++)if(i.pressed[t[a]])return;e=t[0];n.keysym&&(p[e]=!0),i.press(e)}}),I=function(e){n("alt",[65513,65514,65027],e),n("shift",[65505,65506],e),n("ctrl",[65507,65508],e),n("meta",[65511,65512],e),n("hyper",[65515,65516],e),i.modifiers=e.modifiers},C=function(){for(var e in i.pressed)if(!p[e])return!1;return!0};function k(){var e,t=L();if(t){for(;e=t,null!==(t=L()););return C()&&i.reset(),e.defaultPrevented}}function o(e){return!e[a]&&(e[a]=!0)}var A=function(e){i.modifiers.ctrl&&i.modifiers.alt&&(65<=e&&e<=90||97<=e&&e<=122||(e<=255||16777216==(4278190080&e))&&(i.release(65507),i.release(65508),i.release(65513),i.release(65514)))},L=function(){var e=l[0];if(!e)return null;if(!(e instanceof s))return e instanceof c&&!r.keyupUnreliable?(t=e.keysym)?(i.release(t),delete h[e.keyCode],e.defaultPrevented=!0,I(e),l.shift()):(i.reset(),e):l.shift();var t=null,n=[];if(65511===e.keysym||65512===e.keysym){if(1===l.length)return null;if(l[1].keysym!==e.keysym){if(!l[1].modifiers.meta)return l.shift()}else if(l[1]instanceof s)return l.shift()}if(e.reliable?(t=e.keysym,n=l.splice(0,1)):l[1]instanceof u?(t=l[1].keysym,n=l.splice(0,2)):l[1]&&(t=e.keysym,n=l.splice(0,1)),0<n.length){if(I(e),t){A(t);var a=!i.press(t);h[e.keyCode]=t,e.keyupReliable||i.release(t);for(var o=0;o<n.length;o++)n[o].defaultPrevented=a}return e}return null},M=function(e){return"location"in e?e.location:"keyLocation"in e?e.keyLocation:0};this.listenTo=function(t){t.addEventListener("keydown",function(e){var t;i.onkeydown&&(!o(e)||229!==(t=new s(e)).keyCode&&(l.push(t),k()&&e.preventDefault()))},!0),t.addEventListener("keypress",function(e){(i.onkeydown||i.onkeyup)&&o(e)&&(l.push(new u(e)),k()&&e.preventDefault())},!0),t.addEventListener("keyup",function(e){i.onkeyup&&o(e)&&(e.preventDefault(),l.push(new c(e)),k())},!0);function n(e){(i.onkeydown||i.onkeyup)&&o(e)&&e.data&&(t.removeEventListener("input",a,!1),i.type(e.data))}var a=function(e){(i.onkeydown||i.onkeyup)&&o(e)&&e.data&&!e.isComposing&&(t.removeEventListener("compositionend",n,!1),i.type(e.data))};t.addEventListener("input",a,!1),t.addEventListener("compositionend",n,!1)},e&&i.listenTo(e)},Guacamole.Keyboard._nextID=0,Guacamole.Keyboard.ModifierState=function(){this.shift=!1,this.ctrl=!1,this.alt=!1,this.meta=!1,this.hyper=!1},Guacamole.Keyboard.ModifierState.fromKeyboardEvent=function(e){var t=new Guacamole.Keyboard.ModifierState;return t.shift=e.shiftKey,t.ctrl=e.ctrlKey,t.alt=e.altKey,t.meta=e.metaKey,e.getModifierState&&(t.hyper=e.getModifierState("OS")||e.getModifierState("Super")||e.getModifierState("Hyper")||e.getModifierState("Win")),t},(Guacamole=Guacamole||{}).Layer=function(e,t){function n(e,t){e=e||0,t=t||0;var n,a,o=Math.ceil(e/r)*r,i=Math.ceil(t/r)*r;s.width!==o||s.height!==i?(n=null,g||0===s.width||0===s.height||((n=document.createElement("canvas")).width=Math.min(m.width,e),n.height=Math.min(m.height,t),n.getContext("2d").drawImage(s,0,0,n.width,n.height,0,0,n.width,n.height)),a=p.globalCompositeOperation,s.width=o,s.height=i,n&&p.drawImage(n,0,0,n.width,n.height,0,0,n.width,n.height),p.globalCompositeOperation=a,c=0,p.save()):m.reset(),m.width=e,m.height=t}var m=this,r=64,s=document.createElement("canvas"),p=s.getContext("2d"),g=(p.save(),!0),u=!0,c=0,a={1:"destination-in",2:"destination-out",4:"source-in",6:"source-atop",8:"source-out",9:"destination-atop",10:"xor",11:"destination-over",12:"copy",14:"source-over",15:"lighter"};function y(e,t,n,a){n+=e,e=a+t,a=n>m.width?n:m.width,t=e>m.height?e:m.height;m.resize(a,t)}this.autosize=!1,this.width=e,this.height=t,this.getCanvas=function(){return s},this.toCanvas=function(){var e=document.createElement("canvas");return e.width=m.width,e.height=m.height,e.getContext("2d").drawImage(m.getCanvas(),0,0),e},this.resize=function(e,t){e===m.width&&t===m.height||n(e,t)},this.drawImage=function(e,t,n){m.autosize&&y(e,t,n.width,n.height),p.drawImage(n,e,t),g=!1},this.transfer=function(l,e,t,n,a,o,h,d){var i=l.getCanvas();if(!(e>=i.width||t>=i.height)&&(e+n>i.width&&(n=i.width-e),t+a>i.height&&(a=i.height-t),0!==n&&0!==a)){m.autosize&&y(o,h,n,a);for(var r=l.getCanvas().getContext("2d").getImageData(e,t,n,a),s=p.getImageData(o,h,n,a),u=0;u<n*a*4;u+=4){var f=new Guacamole.Layer.Pixel(r.data[u],r.data[u+1],r.data[u+2],r.data[u+3]),c=new Guacamole.Layer.Pixel(s.data[u],s.data[u+1],s.data[u+2],s.data[u+3]);d(f,c),s.data[u]=c.red,s.data[u+1]=c.green,s.data[u+2]=c.blue,s.data[u+3]=c.alpha}p.putImageData(s,o,h),g=!1}},this.put=function(e,t,n,a,o,i,r){var s=e.getCanvas();t>=s.width||n>=s.height||(t+a>s.width&&(a=s.width-t),n+o>s.height&&(o=s.height-n),0!==a&&0!==o&&(m.autosize&&y(i,r,a,o),s=e.getCanvas().getContext("2d").getImageData(t,n,a,o),p.putImageData(s,i,r),g=!1))},this.copy=function(e,t,n,a,o,i,r){e=e.getCanvas();t>=e.width||n>=e.height||(t+a>e.width&&(a=e.width-t),n+o>e.height&&(o=e.height-n),0!==a&&0!==o&&(m.autosize&&y(i,r,a,o),p.drawImage(e,t,n,a,o,i,r,a,o),g=!1))},this.moveTo=function(e,t){u&&(p.beginPath(),u=!1),m.autosize&&y(e,t,0,0),p.moveTo(e,t)},this.lineTo=function(e,t){u&&(p.beginPath(),u=!1),m.autosize&&y(e,t,0,0),p.lineTo(e,t)},this.arc=function(e,t,n,a,o,i){u&&(p.beginPath(),u=!1),m.autosize&&y(e,t,0,0),p.arc(e,t,n,a,o,i)},this.curveTo=function(e,t,n,a,o,i){u&&(p.beginPath(),u=!1),m.autosize&&y(o,i,0,0),p.bezierCurveTo(e,t,n,a,o,i)},this.close=function(){p.closePath(),u=!0},this.rect=function(e,t,n,a){u&&(p.beginPath(),u=!1),m.autosize&&y(e,t,n,a),p.rect(e,t,n,a)},this.clip=function(){p.clip(),u=!0},this.strokeColor=function(e,t,n,a,o,i,r){p.lineCap=e,p.lineJoin=t,p.lineWidth=n,p.strokeStyle="rgba("+a+","+o+","+i+","+r/255+")",p.stroke(),u=!(g=!1)},this.fillColor=function(e,t,n,a){p.fillStyle="rgba("+e+","+t+","+n+","+a/255+")",p.fill(),u=!(g=!1)},this.strokeLayer=function(e,t,n,a){p.lineCap=e,p.lineJoin=t,p.lineWidth=n,p.strokeStyle=p.createPattern(a.getCanvas(),"repeat"),p.stroke(),u=!(g=!1)},this.fillLayer=function(e){p.fillStyle=p.createPattern(e.getCanvas(),"repeat"),p.fill(),u=!(g=!1)},this.push=function(){p.save(),c++},this.pop=function(){0<c&&(p.restore(),c--)},this.reset=function(){for(;0<c;)p.restore(),c--;p.restore(),p.save(),p.beginPath(),u=!1},this.setTransform=function(e,t,n,a,o,i){p.setTransform(e,t,n,a,o,i)},this.transform=function(e,t,n,a,o,i){p.transform(e,t,n,a,o,i)},this.setChannelMask=function(e){p.globalCompositeOperation=a[e]},this.setMiterLimit=function(e){p.miterLimit=e},n(e,t),s.style.zIndex=-1},Guacamole.Layer.ROUT=2,Guacamole.Layer.ATOP=6,Guacamole.Layer.XOR=10,Guacamole.Layer.ROVER=11,Guacamole.Layer.OVER=14,Guacamole.Layer.PLUS=15,Guacamole.Layer.RIN=1,Guacamole.Layer.IN=4,Guacamole.Layer.OUT=8,Guacamole.Layer.RATOP=9,Guacamole.Layer.SRC=12,Guacamole.Layer.Pixel=function(e,t,n,a){this.red=e,this.green=t,this.blue=n,this.alpha=a},(Guacamole=Guacamole||{}).Mouse=function(a){Guacamole.Mouse.Event.Target.call(this);var n=this,o=(this.touchMouseThreshold=3,this.scrollThreshold=53,this.PIXELS_PER_LINE=18,this.PIXELS_PER_PAGE=16*this.PIXELS_PER_LINE,[Guacamole.Mouse.State.Buttons.LEFT,Guacamole.Mouse.State.Buttons.MIDDLE,Guacamole.Mouse.State.Buttons.RIGHT]),i=0,r=0;function e(){i=n.touchMouseThreshold}function t(e){var t=e.deltaY||-e.wheelDeltaY||-e.wheelDelta;if(t?1===e.deltaMode?t=e.deltaY*n.PIXELS_PER_LINE:2===e.deltaMode&&(t=e.deltaY*n.PIXELS_PER_PAGE):t=e.detail*n.PIXELS_PER_LINE,(r+=t)<=-n.scrollThreshold){for(;n.click(Guacamole.Mouse.State.Buttons.UP),(r+=n.scrollThreshold)<=-n.scrollThreshold;);r=0}if(r>=n.scrollThreshold){for(;n.click(Guacamole.Mouse.State.Buttons.DOWN),(r-=n.scrollThreshold)>=n.scrollThreshold;);r=0}Guacamole.Event.DOMEvent.cancelEvent(e)}a.addEventListener("contextmenu",function(e){Guacamole.Event.DOMEvent.cancelEvent(e)},!1),a.addEventListener("mousemove",function(e){if(i)return Guacamole.Event.DOMEvent.cancelEvent(e),void i--;n.move(Guacamole.Position.fromClientPosition(a,e.clientX,e.clientY),e)},!1),a.addEventListener("mousedown",function(e){var t;i?Guacamole.Event.DOMEvent.cancelEvent(e):(t=o[e.button])&&n.press(t,e)},!1),a.addEventListener("mouseup",function(e){var t;i?Guacamole.Event.DOMEvent.cancelEvent(e):(t=o[e.button])&&n.release(t,e)},!1),a.addEventListener("mouseout",function(e){for(var t=(e=e||window.event).relatedTarget||e.toElement;t;){if(t===a)return;t=t.parentNode}n.reset(e),n.out(e)},!1),a.addEventListener("selectstart",function(e){Guacamole.Event.DOMEvent.cancelEvent(e)},!1),a.addEventListener("touchmove",e,!1),a.addEventListener("touchstart",e,!1),a.addEventListener("touchend",e,!1),a.addEventListener("DOMMouseScroll",t,!1),a.addEventListener("mousewheel",t,!1),a.addEventListener("wheel",t,!1);var s=function(){var e=document.createElement("div");if(!("cursor"in e.style))return!1;try{e.style.cursor="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX///+nxBvIAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==) 0 0, auto"}catch(e){return!1}return/\burl\([^()]*\)\s+0\s+0\b/.test(e.style.cursor||"")}();this.setCursor=function(e,t,n){return!!s&&(e=e.toDataURL("image/png"),a.style.cursor="url("+e+") "+t+" "+n+", auto",!0)}},Guacamole.Mouse.State=function(e){e=1<arguments.length?function(e,t,n,a,o,i,r){return{x:e,y:t,left:n,middle:a,right:o,up:i,down:r}}.apply(this,arguments):e||{},Guacamole.Position.call(this,e),this.left=e.left||!1,this.middle=e.middle||!1,this.right=e.right||!1,this.up=e.up||!1,this.down=e.down||!1},Guacamole.Mouse.State.Buttons={LEFT:"left",MIDDLE:"middle",RIGHT:"right",UP:"up",DOWN:"down"},Guacamole.Mouse.Event=function(e,t,n){Guacamole.Event.DOMEvent.call(this,e,n);var a="on"+this.type;this.state=t,this.invokeLegacyHandler=function(e){e[a]&&(this.preventDefault(),this.stopPropagation(),e[a](this.state))}},Guacamole.Mouse.Event.Target=function(){Guacamole.Event.Target.call(this),this.currentState=new Guacamole.Mouse.State,this.press=function(e,t){this.currentState[e]||(this.currentState[e]=!0,this.dispatch(new Guacamole.Mouse.Event("mousedown",this.currentState,t)))},this.release=function(e,t){this.currentState[e]&&(this.currentState[e]=!1,this.dispatch(new Guacamole.Mouse.Event("mouseup",this.currentState,t)))},this.click=function(e,t){this.press(e,t),this.release(e,t)},this.move=function(e,t){this.currentState.x===e.x&&this.currentState.y===e.y||(this.currentState.x=e.x,this.currentState.y=e.y,this.dispatch(new Guacamole.Mouse.Event("mousemove",this.currentState,t)))},this.out=function(e){this.dispatch(new Guacamole.Mouse.Event("mouseout",this.currentState,e))},this.reset=function(e){for(var t in Guacamole.Mouse.State.Buttons)this.release(Guacamole.Mouse.State.Buttons[t],e)}},Guacamole.Mouse.Touchpad=function(r){Guacamole.Mouse.Event.Target.call(this);var s=this,u=(this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=10*(window.devicePixelRatio||1),this.currentState=new Guacamole.Mouse.State,0),c=0,l=0,h=0,d=0,a={1:"left",2:"right",3:"middle"},o=!1,i=null;r.addEventListener("touchend",function(e){var t,n;e.preventDefault(),o&&0===e.touches.length&&(t=(new Date).getTime(),n=a[u],s.currentState[n]&&(s.release(n,e),i&&(window.clearTimeout(i),i=null)),t-h<=s.clickTimingThreshold&&d<s.clickMoveThreshold&&(s.press(n,e),i=window.setTimeout(function(){s.release(n,e),o=!1},s.clickTimingThreshold)),i||(o=!1))},!1),r.addEventListener("touchstart",function(e){e.preventDefault(),u=Math.min(e.touches.length,3),i&&(window.clearTimeout(i),i=null),o||(o=!0,e=e.touches[0],c=e.clientX,l=e.clientY,h=(new Date).getTime(),d=0)},!1),r.addEventListener("touchmove",function(e){e.preventDefault();var t,n,a=e.touches[0],o=a.clientX-c,i=a.clientY-l;d+=Math.abs(o)+Math.abs(i),1===u?(t=1+d/((new Date).getTime()-h),(n=new Guacamole.Position(s.currentState)).x+=o*t,n.y+=i*t,n.x=Math.min(Math.max(0,n.x),r.offsetWidth-1),n.y=Math.min(Math.max(0,n.y),r.offsetHeight-1),s.move(n,e),c=a.clientX,l=a.clientY):2===u&&Math.abs(i)>=s.scrollThreshold&&(s.click(0<i?"down":"up",e),c=a.clientX,l=a.clientY)},!1)},Guacamole.Mouse.Touchscreen=function(n){Guacamole.Mouse.Event.Target.call(this);var a=this,o=!1,i=null,r=null,s=null,u=null;function c(e){var e=e.touches[0]||e.changedTouches[0],t=e.clientX-i,e=e.clientY-r;return Math.sqrt(t*t+e*e)>=a.clickMoveThreshold}function l(){window.clearTimeout(s),window.clearTimeout(u),o=!1}this.scrollThreshold=20*(window.devicePixelRatio||1),this.clickTimingThreshold=250,this.clickMoveThreshold=16*(window.devicePixelRatio||1),this.longPressThreshold=500,n.addEventListener("touchend",function(e){var t;o&&(0===e.touches.length&&1===e.changedTouches.length?(window.clearTimeout(u),a.release(Guacamole.Mouse.State.Buttons.LEFT,e),c(e)||(e.preventDefault(),a.currentState.left||(t=e.changedTouches[0],a.move(Guacamole.Position.fromClientPosition(n,t.clientX,t.clientY)),a.press(Guacamole.Mouse.State.Buttons.LEFT,e),s=window.setTimeout(function(){a.release(Guacamole.Mouse.State.Buttons.LEFT,e),l()},a.clickTimingThreshold)))):l())},!1),n.addEventListener("touchstart",function(t){var e;1===t.touches.length?(t.preventDefault(),e=(e=t).touches[0],o=!0,i=e.clientX,r=e.clientY,window.clearTimeout(s),u=window.setTimeout(function(){var e=t.touches[0];a.move(Guacamole.Position.fromClientPosition(n,e.clientX,e.clientY)),a.click(Guacamole.Mouse.State.Buttons.RIGHT,t),l()},a.longPressThreshold)):l()},!1),n.addEventListener("touchmove",function(e){var t;o&&(c(e)&&window.clearTimeout(u),1===e.touches.length?a.currentState.left&&(e.preventDefault(),t=e.touches[0],a.move(Guacamole.Position.fromClientPosition(n,t.clientX,t.clientY),e)):l())},!1)},(Guacamole=(Guacamole=Guacamole||{})||{}).Object=function(o,e){var i=this,r={};this.index=e,this.onbody=function(e,t,n){n=function(e){var t=r[e];if(!t)return null;var n=t.shift();return 0===t.length&&delete r[e],n}(n);n&&n(e,t)},this.onundefine=null,this.requestInputStream=function(e,t){var n,a;t&&(t=t,(a=r[n=e])||(r[n]=a=[]),a.push(t)),o.requestObjectInputStream(i.index,e)},this.createOutputStream=function(e,t){return o.createObjectOutputStream(i.index,e,t)}},Guacamole.Object.ROOT_STREAM="/",Guacamole.Object.STREAM_INDEX_MIMETYPE="application/vnd.glyptodon.guacamole.stream-index+json",(Guacamole=Guacamole||{}).OnScreenKeyboard=function(a){var p=this,o={},i={},g=[],y=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},r=function(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(/([^ ]+)[ ]*/g,function(e,t){return t===n?"":e})},v=0,G=function(t,n,a,o){this.width=n,this.height=a,this.scale=function(e){t.style.width=n*e+"px",t.style.height=a*e+"px",o&&(t.style.lineHeight=a*e+"px",t.style.fontSize=e+"px")}},u=function(e){for(var t=0;t<e.length;t++)if(!(e[t]in o))return!1;return!0},c=function(e){var t=p.keys[e];if(!t)return null;for(var n=t.length-1;0<=n;n--){var a=t[n];if(u(a.requires))return a}return null},S=function(e,t){var n,a;i[e]||(y(t,"guac-keyboard-pressed"),(t=c(e)).modifier?(n="guac-keyboard-modifier-"+w(t.modifier),void 0===(a=o[t.modifier])?(y(s,n),o[t.modifier]=t.keysym,t.keysym&&p.onkeydown&&p.onkeydown(t.keysym)):(r(s,n),delete o[t.modifier],a&&p.onkeyup&&p.onkeyup(a))):p.onkeydown&&p.onkeydown(t.keysym),i[e]=!0)},T=function(e,t){i[e]&&(r(t,"guac-keyboard-pressed"),!(t=c(e)).modifier&&p.onkeyup&&p.onkeyup(t.keysym),i[e]=!1)},s=document.createElement("div"),l=(s.className="guac-keyboard",s.onselectstart=s.onmousemove=s.onmouseup=s.onmousedown=function(e){return v&&v--,e.stopPropagation(),!1},this.touchMouseThreshold=3,this.onkeydown=null,this.onkeyup=null,this.layout=new Guacamole.OnScreenKeyboard.Layout(a),this.getElement=function(){return s},this.resize=function(e){for(var t=Math.floor(10*e/p.layout.width)/10,n=0;n<g.length;n++)g[n].scale(t)},function(e,t){if(t instanceof Array){for(var n=[],a=0;a<t.length;a++)n.push(new Guacamole.OnScreenKeyboard.Key(t[a],e));return n}return"number"==typeof t?[new Guacamole.OnScreenKeyboard.Key({name:e,keysym:t})]:"string"==typeof t?[new Guacamole.OnScreenKeyboard.Key({name:e,title:t})]:[new Guacamole.OnScreenKeyboard.Key(t,e)]}),w=(this.keys=function(e){var t,n={};for(t in a.keys)n[t]=l(t,e[t]);return n}(a.keys),function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[^A-Za-z0-9]+/g,"-").toLowerCase()});(function l(h,t,e){var n=document.createElement("div");if(e&&y(n,"guac-keyboard-"+w(e)),t instanceof Array)for(y(n,"guac-keyboard-group"),a=0;a<t.length;a++)l(n,t[a]);else if(t instanceof Object){y(n,"guac-keyboard-group");for(var d=Object.keys(t).sort(),a=0;a<d.length;a++){e=d[a];l(n,t[e],e)}}else if("number"==typeof t)y(n,"guac-keyboard-gap"),g.push(new G(n,t,t));else if("string"==typeof t){var o=t,i=(1===o.length&&(o="0x"+o.charCodeAt(0).toString(16)),y(n,"guac-keyboard-key-container"),document.createElement("div")),r=(i.className="guac-keyboard-key guac-keyboard-key-"+w(o),p.keys[t]);if(r)for(a=0;a<r.length;a++){var s=r[a],u=document.createElement("div");u.className="guac-keyboard-cap",u.textContent=s.title;for(var c=0;c<s.requires.length;c++){var f=s.requires[c];y(u,"guac-keyboard-requires-"+w(f)),y(i,"guac-keyboard-uses-"+w(f))}i.appendChild(u)}n.appendChild(i),g.push(new G(n,p.layout.keyWidths[t]||1,1,!0));function m(e){e.preventDefault(),0===v&&T(t,i)}i.addEventListener("touchstart",function(e){e.preventDefault(),v=p.touchMouseThreshold,S(t,i)},!0),i.addEventListener("touchend",function(e){e.preventDefault(),v=p.touchMouseThreshold,T(t,i)},!0),i.addEventListener("mousedown",function(e){e.preventDefault(),0===v&&S(t,i)},!0),i.addEventListener("mouseup",m,!0),i.addEventListener("mouseout",m,!0)}h.appendChild(n)})(s,a.layout)},Guacamole.OnScreenKeyboard.Layout=function(e){this.language=e.language,this.type=e.type,this.keys=e.keys,this.layout=e.layout,this.width=e.width,this.keyWidths=e.keyWidths||{}},Guacamole.OnScreenKeyboard.Key=function(e,t){this.name=t||e.name,this.title=e.title||this.name,this.keysym=e.keysym||function(e){if(!e||1!==e.length)return null;e=e.charCodeAt(0);return 0<=e&&e<=255?e:256<=e&&e<=1114111?16777216|e:null}(this.title),this.modifier=e.modifier,this.requires=e.requires||[]},(Guacamole=Guacamole||{}).OutputStream=function(t,e){var n=this;this.index=e,this.onack=null,this.sendBlob=function(e){t.sendBlob(n.index,e)},this.sendEnd=function(){t.endStream(n.index)}}}(Guacamole=Guacamole||{}).Parser=function(){var a=this,o="",i=[],r=-1,s=0;this.receive=function(e){for(4096<s&&s<=r&&(o=o.substring(s),r-=s,s=0),o+=e;r<o.length;){if(s<=r){var t=o.substring(s,r),n=o.substring(r,r+1);if(i.push(t),";"==n){t=i.shift();null!=a.oninstruction&&a.oninstruction(t,i),i.length=0}else if(","!=n)throw new Error("Illegal terminator.");s=r+1}t=o.indexOf(".",s);if(-1==t){s=o.length;break}n=parseInt(o.substring(r+1,t));if(isNaN(n))throw new Error("Non-numeric character in element length.");r=(s=t+1)+n}},this.oninstruction=null},(Guacamole=Guacamole||{}).Position=function(e){this.x=(e=e||{}).x||0,this.y=e.y||0,this.fromClientPosition=function(e,t,n){this.x=t-e.offsetLeft,this.y=n-e.offsetTop;for(var a=e.offsetParent;a&&a!==document.body;)this.x-=a.offsetLeft-a.scrollLeft,this.y-=a.offsetTop-a.scrollTop,a=a.offsetParent;a&&(t=document.body.scrollLeft||document.documentElement.scrollLeft,n=document.body.scrollTop||document.documentElement.scrollTop,this.x-=a.offsetLeft-t,this.y-=a.offsetTop-n)}},Guacamole.Position.fromClientPosition=function(e,t,n){var a=new Guacamole.Position;return a.fromClientPosition(e,t,n),a},(Guacamole=Guacamole||{}).RawAudioFormat=function(e){this.bytesPerSample=e.bytesPerSample,this.channels=e.channels,this.rate=e.rate},Guacamole.RawAudioFormat.parse=function(e){var t,n=null,a=1;if("audio/L8;"===e.substring(0,9))e=e.substring(9),t=1;else{if("audio/L16;"!==e.substring(0,10))return null;e=e.substring(10),t=2}for(var o=e.split(","),i=0;i<o.length;i++){var r=o[i],s=r.indexOf("=");if(-1===s)return null;var u=r.substring(0,s),c=r.substring(s+1);switch(u){case"channels":a=parseInt(c);break;case"rate":n=parseInt(c);break;default:return null}}return null===n?null:new Guacamole.RawAudioFormat({bytesPerSample:t,channels:a,rate:n})},(Guacamole=Guacamole||{}).SessionRecording=function(t){function i(e,t,n){if(e===t)return e;var a=Math.floor((e+t)/2),o=p(c[a].timestamp);return n<o&&e<a?i(e,a-1,n):o<n&&a<t?i(a+1,t,n):a}function s(){var e;h+1<c.length?(e=c[h+1].timestamp-n+r,e=Math.max(e-(new Date).getTime(),0),y(h+1,function(){s()},e)):u.pause()}var u=this,d=5,c=[],a=[],o=0,f=0,m=new Guacamole.SessionRecording._PlaybackTunnel,l=new Guacamole.Client(m),h=-1,n=null,r=null,e=null,p=(l.connect(),l.getDisplay().showCursor(!1),t.oninstruction=function(e,t){var n=new Guacamole.SessionRecording._Frame.Instruction(e,t.slice());a.push(n),o+=n.getSize(),"sync"===e&&(n=parseInt(t[0]),e=new Guacamole.SessionRecording._Frame(n,a),c.push(e),(1===c.length||16384<=o&&5e3<=n-f)&&(e.keyframe=!0,f=n,o=0),a=[],u.onprogress&&u.onprogress(u.getDuration()))},function(e){return 0===c.length?0:e-c[0].timestamp}),g=function(e){for(var t=c[e],n=0;n<t.instructions.length;n++){var a=t.instructions[n];m.receiveInstruction(a.opcode,a.args)}t.keyframe&&!t.clientState&&l.exportState(function(e){t.clientState=e})},y=function o(i,r,s){v(),e=window.setTimeout(function(){for(var e=i;0<=e;e--){var t=c[e];if(e===h)break;if(t.clientState){l.importState(t.clientState);break}}e++;for(var n=(new Date).getTime();e<=i;e++){var a=(new Date).getTime();if(d<=a-n)break;g(e)}h=e-1,u.onseek&&u.onseek(u.getPosition()),h!==i?o(i,r,Math.max(s-((new Date).getTime()-n),0)):r()},s||0)},v=function(){window.clearTimeout(e)};this.onprogress=null,this.onplay=null,this.onpause=null,this.onseek=null,this.connect=function(e){t.connect(e)},this.disconnect=function(){t.disconnect()},this.getDisplay=function(){return l.getDisplay()},this.isPlaying=function(){return!!n},this.getPosition=function(){return-1===h?0:p(c[h].timestamp)},this.getDuration=function(){return 0===c.length?0:p(c[c.length-1].timestamp)},this.play=function(){var e;!u.isPlaying()&&h+1<c.length&&(u.onplay&&u.onplay(),e=c[h+1],n=e.timestamp,r=(new Date).getTime(),s())},this.seek=function(e,t){var n;0!==c.length&&(n=u.isPlaying(),u.pause(),y(i(0,c.length-1,e),function(){n&&u.play(),t&&t()}))},this.pause=function(){v(),u.isPlaying()&&(u.onpause&&u.onpause(),r=n=null)}},Guacamole.SessionRecording._Frame=function(e,t){this.keyframe=!1,this.timestamp=e,this.instructions=t,this.clientState=null},Guacamole.SessionRecording._Frame.Instruction=function(e,t){var n=this;this.opcode=e,this.args=t,this.getSize=function(){for(var e=n.opcode.length,t=0;t<n.args.length;t++)e+=n.args[t].length;return e}},Guacamole.SessionRecording._PlaybackTunnel=function(){var n=this;this.connect=function(e){},this.sendMessage=function(e){},this.disconnect=function(){},this.receiveInstruction=function(e,t){n.oninstruction&&n.oninstruction(e,t)}},(Guacamole=Guacamole||{}).Status=function(e,t){var n=this;this.code=e,this.message=t,this.isError=function(){return n.code<0||255<n.code}},Guacamole.Status.Code={SUCCESS:0,UNSUPPORTED:256,SERVER_ERROR:512,SERVER_BUSY:513,UPSTREAM_TIMEOUT:514,UPSTREAM_ERROR:515,RESOURCE_NOT_FOUND:516,RESOURCE_CONFLICT:517,RESOURCE_CLOSED:518,UPSTREAM_NOT_FOUND:519,UPSTREAM_UNAVAILABLE:520,SESSION_CONFLICT:521,SESSION_TIMEOUT:522,SESSION_CLOSED:523,CLIENT_BAD_REQUEST:768,CLIENT_UNAUTHORIZED:769,CLIENT_FORBIDDEN:771,CLIENT_TIMEOUT:776,CLIENT_OVERRUN:781,CLIENT_BAD_TYPE:783,CLIENT_TOO_MANY:797},Guacamole.Status.Code.fromHTTPCode=function(e){switch(e){case 400:return Guacamole.Status.Code.CLIENT_BAD_REQUEST;case 403:return Guacamole.Status.Code.CLIENT_FORBIDDEN;case 404:return Guacamole.Status.Code.RESOURCE_NOT_FOUND;case 429:return Guacamole.Status.Code.CLIENT_TOO_MANY;case 503:return Guacamole.Status.Code.SERVER_BUSY}return Guacamole.Status.Code.SERVER_ERROR},Guacamole.Status.Code.fromWebSocketCode=function(e){switch(e){case 1e3:return Guacamole.Status.Code.SUCCESS;case 1006:case 1015:return Guacamole.Status.Code.UPSTREAM_NOT_FOUND;case 1001:case 1012:case 1013:case 1014:return Guacamole.Status.Code.UPSTREAM_UNAVAILABLE}return Guacamole.Status.Code.SERVER_ERROR},(Guacamole=Guacamole||{}).StringReader=function(e){var t=this,e=new Guacamole.ArrayBufferReader(e),i=0,r=0;e.ondata=function(e){e=function(e){for(var t="",n=new Uint8Array(e),a=0;a<n.length;a++){var o=n[a];0===i?127==(127|o)?t+=String.fromCharCode(o):223==(31|o)?(r=31&o,i=1):239==(15|o)?(r=15&o,i=2):247==(7|o)?(r=7&o,i=3):t+="":191==(63|o)?(r=r<<6|63&o,0===--i&&(t+=String.fromCharCode(r))):(i=0,t+="")}return t}(e);t.ontext&&t.ontext(e)},e.onend=function(){t.onend&&t.onend()},this.ontext=null,this.onend=null},(Guacamole=Guacamole||{}).StringWriter=function(e){var t=this,n=new Guacamole.ArrayBufferWriter(e),s=new Uint8Array(8192),u=0;function c(e){var t,n,a,o;if(e<=127)t=0,n=1;else if(e<=2047)t=192,n=2;else if(e<=65535)t=224,n=3;else{if(!(e<=2097151))return void c(65533);t=240,n=4}u+(a=n)>=s.length&&((o=new Uint8Array(2*(u+a))).set(s),s=o);for(var i=(u+=a)-1,r=1;r<n;r++)s[i--]=128|63&e,e>>=6;s[i]=t|e}n.onack=function(e){t.onack&&t.onack(e)},this.sendText=function(e){e.length&&n.sendData(function(e){for(var t,n=0;n<e.length;n++)c(e.charCodeAt(n));if(0<u)return t=s.subarray(0,u),u=0,t}(e))},this.sendEnd=function(){n.sendEnd()},this.onack=null},(Guacamole=Guacamole||{}).Touch=function(i){Guacamole.Event.Target.call(this);var r=this,o=Math.floor(16*window.devicePixelRatio);this.touches={},this.activeTouches=0,i.addEventListener("touchstart",function(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],a=n.identifier;r.touches[a]||(a=r.touches[a]=new Guacamole.Touch.State({id:a,radiusX:n.radiusX||o,radiusY:n.radiusY||o,angle:n.angle||0,force:n.force||1}),r.activeTouches++,a.fromClientPosition(i,n.clientX,n.clientY),r.dispatch(new Guacamole.Touch.Event("touchmove",e,a)))}},!1),i.addEventListener("touchmove",function(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],a=n.identifier,a=r.touches[a];a&&(n.force&&(a.force=n.force),a.angle=n.angle||0,a.radiusX=n.radiusX||o,a.radiusY=n.radiusY||o,a.fromClientPosition(i,n.clientX,n.clientY),r.dispatch(new Guacamole.Touch.Event("touchmove",e,a)))}},!1),i.addEventListener("touchend",function(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],a=n.identifier,o=r.touches[a];o&&(delete r.touches[a],r.activeTouches--,o.force=0,o.fromClientPosition(i,n.clientX,n.clientY),r.dispatch(new Guacamole.Touch.Event("touchend",e,o)))}},!1)},Guacamole.Touch.State=function(e){Guacamole.Position.call(this,e=e||{}),this.id=e.id||0,this.radiusX=e.radiusX||0,this.radiusY=e.radiusY||0,this.angle=e.angle||0,this.force=e.force||1},Guacamole.Touch.Event=function(e,t,n){Guacamole.Event.DOMEvent.call(this,e,[t]),this.state=n},(Guacamole=Guacamole||{}).Tunnel=function(){this.connect=function(e,t){},this.disconnect=function(){},this.sendMessage=function(e){},this.setState=function(e){e!==this.state&&(this.state=e,this.onstatechange&&this.onstatechange(e))},this.setUUID=function(e){this.uuid=e,this.onuuid&&this.onuuid(e)},this.isConnected=function(){return this.state===Guacamole.Tunnel.State.OPEN||this.state===Guacamole.Tunnel.State.UNSTABLE},this.state=Guacamole.Tunnel.State.CONNECTING,this.receiveTimeout=15e3,this.unstableThreshold=1500,this.uuid=null,this.onuuid=null,this.onerror=null,this.onstatechange=null,this.oninstruction=null},Guacamole.Tunnel.INTERNAL_DATA_OPCODE="",Guacamole.Tunnel.State={CONNECTING:0,OPEN:1,CLOSED:2,UNSTABLE:3},Guacamole.HTTPTunnel=function(e,s,u){var d=this,c=e+"?connect",l=e+"?read:",h=e+"?write:",f=1,a=!1,o="",i=!!s,t=null,n=null,p=null,g=u||{};function y(e,t){for(var n in t)e.setRequestHeader(n,t[n])}function m(){window.clearTimeout(t),window.clearTimeout(n),d.state===Guacamole.Tunnel.State.UNSTABLE&&d.setState(Guacamole.Tunnel.State.OPEN),t=window.setTimeout(function(){r(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},d.receiveTimeout),n=window.setTimeout(function(){d.setState(Guacamole.Tunnel.State.UNSTABLE)},d.unstableThreshold)}function r(e){window.clearTimeout(t),window.clearTimeout(n),window.clearInterval(p),d.state!==Guacamole.Tunnel.State.CLOSED&&(e.code!==Guacamole.Status.Code.SUCCESS&&d.onerror&&(d.state!==Guacamole.Tunnel.State.CONNECTING&&e.code===Guacamole.Status.Code.RESOURCE_NOT_FOUND||d.onerror(e)),a=!1,d.setState(Guacamole.Tunnel.State.CLOSED))}function v(e){var t,n=parseInt(e.getResponseHeader("Guacamole-Status-Code"));n?(t=e.getResponseHeader("Guacamole-Error-Message"),r(new Guacamole.Status(n,t))):e.status?r(new Guacamole.Status(Guacamole.Status.Code.fromHTTPCode(e.status),e.statusText)):r(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_NOT_FOUND))}this.sendMessage=function(){if(d.isConnected()&&0!==arguments.length){for(var e=n(arguments[0]),t=1;t<arguments.length;t++)e+=","+n(arguments[t]);o+=e+=";",a||function e(){if(!d.isConnected())return;{var t;0<o.length?(a=!0,(t=new XMLHttpRequest).open("POST",h+d.uuid),t.withCredentials=i,y(t,g),t.setRequestHeader("Content-type","application/octet-stream"),t.onreadystatechange=function(){4===t.readyState&&(m(),200!==t.status?v(t):e())},t.send(o),o=""):a=!1}}()}function n(e){e=new String(e);return e.length+"."+e}};var w=0;function G(){var e=new XMLHttpRequest;return e.open("GET",l+d.uuid+":"+w++),e.withCredentials=i,y(e,g),e.send(null),e}this.connect=function(e){m(),d.setState(Guacamole.Tunnel.State.CONNECTING);var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200===t.status?(m(),d.setUUID(t.responseText),d.setState(Guacamole.Tunnel.State.OPEN),p=setInterval(function(){d.sendMessage("nop")},500),function o(i){var r=null,s=null,e=0,u=-1,c=0,l=new Array;function h(){if(d.isConnected()){if(!(i.readyState<2)){var t,e;try{t=i.status}catch(e){t=200}if(s||200!==t||(s=G()),3===i.readyState||4===i.readyState)if(m(),1===f&&(3!==i.readyState||r?4===i.readyState&&r&&clearInterval(r):r=setInterval(h,30)),0!==i.status)if(200===i.status){try{e=i.responseText}catch(e){return}for(;u<e.length;){c<=u&&(a=e.substring(c,u),n=e.substring(u,u+1),l.push(a),";"===n&&(a=l.shift(),d.oninstruction&&d.oninstruction(a,l),l.length=0),c=u+1);var n=e.indexOf(".",c);if(-1===n){c=e.length;break}var a=parseInt(e.substring(u+1,n));if(0===a){r&&clearInterval(r),i.onreadystatechange=null,i.abort(),s&&o(s);break}u=(c=n+1)+a}}else v(i);else d.disconnect()}}else null!==r&&clearInterval(r)}i.onreadystatechange=1===f?function(){3===i.readyState&&2<=++e&&(f=0,i.onreadystatechange=h),h()}:h,h()}(G())):v(t))},t.open("POST",c,!0),t.withCredentials=i,y(t,g),t.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(e)},this.disconnect=function(){r(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}},Guacamole.HTTPTunnel.prototype=new Guacamole.Tunnel,Guacamole.WebSocketTunnel=function(n){var e,t,s=this,o=null,a=null,i=null,r=null;function u(){window.clearTimeout(a),window.clearTimeout(i),s.state===Guacamole.Tunnel.State.UNSTABLE&&s.setState(Guacamole.Tunnel.State.OPEN),a=window.setTimeout(function(){c(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_TIMEOUT,"Server timeout."))},s.receiveTimeout),i=window.setTimeout(function(){s.setState(Guacamole.Tunnel.State.UNSTABLE)},s.unstableThreshold)}function c(e){window.clearTimeout(a),window.clearTimeout(i),window.clearInterval(r),s.state!==Guacamole.Tunnel.State.CLOSED&&(e.code!==Guacamole.Status.Code.SUCCESS&&s.onerror&&s.onerror(e),s.setState(Guacamole.Tunnel.State.CLOSED),o.close())}"ws:"!==n.substring(0,3)&&"wss:"!==n.substring(0,4)&&(e={"http:":"ws:","https:":"wss:"}[window.location.protocol],n="/"===n.substring(0,1)?e+"//"+window.location.host+n:(t=window.location.pathname.lastIndexOf("/"),t=window.location.pathname.substring(0,t+1),e+"//"+window.location.host+t+n)),this.sendMessage=function(e){if(s.isConnected()&&0!==arguments.length){for(var t=a(e),n=1;n<arguments.length;n++)t+=","+a(arguments[n]);o.send(t+=";")}function a(e){e=new String(e);return e.length+"."+e}},this.connect=function(e,t){u(),s.setState(Guacamole.Tunnel.State.CONNECTING),t.push("guacamole"),(o=new WebSocket(n+"?"+e,t)).onopen=function(e){u(),r=setInterval(function(){s.sendMessage(Guacamole.Tunnel.INTERNAL_DATA_OPCODE,"ping",(new Date).getTime())},500)},o.onclose=function(e){e.reason?c(new Guacamole.Status(parseInt(e.reason),e.reason)):e.code?c(new Guacamole.Status(Guacamole.Status.Code.fromWebSocketCode(e.code))):c(new Guacamole.Status(Guacamole.Status.Code.UPSTREAM_NOT_FOUND))},o.onmessage=function(e){u();var t=e.data,n=0,a=[];do{var o,i=t.indexOf(".",n),i=(-1!==i?o=(n=i+1)+parseInt(t.substring(o+1,i)):c(new Guacamole.Status(Guacamole.Status.Code.SERVER_ERROR,"Incomplete instruction.")),t.substring(n,o)),r=t.substring(o,o+1)}while(a.push(i),";"===r&&(i=a.shift(),null===s.uuid&&(i===Guacamole.Tunnel.INTERNAL_DATA_OPCODE&&s.setUUID(a[0]),s.setState(Guacamole.Tunnel.State.OPEN)),i!==Guacamole.Tunnel.INTERNAL_DATA_OPCODE&&s.oninstruction&&s.oninstruction(i,a),a.length=0),(n=o+1)<t.length)}},this.disconnect=function(){c(new Guacamole.Status(Guacamole.Status.Code.SUCCESS,"Manually closed."))}},Guacamole.WebSocketTunnel.prototype=new Guacamole.Tunnel,Guacamole.ChainedTunnel=function(e){for(var o,i,r=this,s=[],u=null,t=0;t<arguments.length;t++)s.push(arguments[t]);function c(t){r.disconnect=t.disconnect,r.sendMessage=t.sendMessage;function n(e){return e&&e.code===Guacamole.Status.Code.UPSTREAM_TIMEOUT?(s=[],0):((e=s.shift())&&(t.onerror=null,t.oninstruction=null,t.onstatechange=null,c(e)),e)}function a(){t.onstatechange=r.onstatechange,t.oninstruction=r.oninstruction,t.onerror=r.onerror,t.onuuid=r.onuuid,t.uuid&&r.setUUID(t.uuid),u=t}t.onstatechange=function(e){switch(e){case Guacamole.Tunnel.State.OPEN:a(),r.onstatechange&&r.onstatechange(e);break;case Guacamole.Tunnel.State.CLOSED:!n()&&r.onstatechange&&r.onstatechange(e)}},t.oninstruction=function(e,t){a(),r.oninstruction&&r.oninstruction(e,t)},t.onerror=function(e){!n(e)&&r.onerror&&r.onerror(e)},t.connect(o,i)}this.connect=function(e){o=e;e=u||s.shift();e?c(e):r.onerror&&r.onerror(Guacamole.Status.Code.SERVER_ERROR,"No tunnels to try.")}},Guacamole.ChainedTunnel.prototype=new Guacamole.Tunnel,Guacamole.StaticHTTPTunnel=function(s,u,e){var c=this,l=null,h=e||{};this.sendMessage=function(e){},this.connect=function(e,t){c.disconnect(),c.setState(Guacamole.Tunnel.State.CONNECTING),(l=new XMLHttpRequest).open("GET",s),l.withCredentials=!!u;var n,a=l,o=h;for(n in o)a.setRequestHeader(n,o[n]);l.responseType="text",l.send(null);var i=0,r=new Guacamole.Parser;r.oninstruction=function(e,t){c.oninstruction&&c.oninstruction(e,t)},l.onreadystatechange=function(){var e,t;3!==l.readyState&&4!==l.readyState||(c.setState(Guacamole.Tunnel.State.OPEN),t=(e=l.responseText).length,i<t&&(r.receive(e.substring(i)),i=t)),4===l.readyState&&c.disconnect()},l.onerror=function(){c.onerror&&c.onerror(new Guacamole.Status(Guacamole.Status.Code.fromHTTPCode(l.status),l.statusText)),c.disconnect()}},this.disconnect=function(){l&&(l.abort(),l=null),c.setState(Guacamole.Tunnel.State.CLOSED)}},Guacamole.StaticHTTPTunnel.prototype=new Guacamole.Tunnel,(Guacamole=Guacamole||{}).API_VERSION="1.3.0",(Guacamole=Guacamole||{}).VideoPlayer=function(){this.sync=function(){}},Guacamole.VideoPlayer.isSupportedType=function(e){return!1},Guacamole.VideoPlayer.getSupportedTypes=function(){return[]},Guacamole.VideoPlayer.getInstance=function(e,t,n){return null},module.exports=Guacamole;